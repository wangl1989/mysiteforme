layui.define(["layer","laypage","laytpl"],function(e){"use strict";function r(e){throw new Error(e)}var t=layui.jquery,a=void 0===parent.layui.layer?layui.layer:parent.layui.layer,n=layui.laytpl,i=function(){this.config={url:void 0,type:"POST",elem:void 0,params:{},openWait:!1,tempElem:void 0,tempType:0,paged:!0,pageConfig:{elem:void 0,pageSize:15},success:void 0,fail:function(e){a.msg(e,{icon:2})},complate:void 0,serverError:function(e){r("错误提示： "+e.status+" "+e.statusText)}}};i.prototype.v="1.0.2",i.prototype.set=function(e){var r=this;return t.extend(!0,r.config,e),r},i.prototype.init=function(e){var a=this;t.extend(!0,a.config,e);var n=a.config;if(void 0===n.url&&r("Paging Error:请配置远程URL!"),void 0===n.elem&&r("Paging Error:请配置参数elem!"),0===t(n.elem).length&&r("Paging Error:找不到配置的容器elem!"),0===n.tempType&&(void 0===n.tempElem&&r("Paging Error:请配置参数tempElem!"),0===t(n.tempElem).length&&r("Paging Error:找不到配置的容器tempElem!")),n.paged){var i=n.pageConfig;void 0===i.elem&&r("Paging Error:请配置参数pageConfig.elem!")}return"GET"!==n.type.toUpperCase()&&"POST"!==n.type.toUpperCase()&&r("Paging Error:type参数配置出错，只支持GET或都POST"),a.get({pageIndex:1,pageSize:n.pageConfig.pageSize}),a},i.prototype.get=function(e){var i=this,o=i.config,p=void 0;o.openWait&&(p=a.load(2));var g={pageIndex:1,pageSize:o.pageConfig.pageSize};t.extend(!0,o.params,g,e),t.ajax({type:o.type,url:o.url,data:o.params,dataType:"json",success:function(e){if(e.rel){var g=0===o.tempType?t(o.tempElem).html():o.tempElem;if(n(g).render(e,function(e){o.renderBefore?o.renderBefore(e,function(e){t(o.elem).html(e)}):t(o.elem).html(e)}),o.paged){if(null===e.count||0===e.count)return void r("Paging Error:请返回数据总数！");var l=o.pageConfig,u=l.pageSize,c=e.count%u==0?e.count/u:e.count/u+1,m={cont:t(l.elem),curr:o.params.pageIndex,pages:c,jump:function(e,r){var t=e.curr;r||i.get({pageIndex:t,pageSize:u})}};t.extend(m,l),layui.laypage(m)}o.success&&o.success()}else o.fail&&o.fail(e);o.complate&&o.complate(),void 0!==p&&a.close(p)},error:function(e,r,t){void 0!==p&&a.close(p),o.serverError(e,r,t)}})};var o=new i;e("paging",function(e){return o.set(e)})});